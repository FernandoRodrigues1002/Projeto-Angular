<h2>Editar Pessoa</h2>

<div class="container">
  <form
    [formGroup]="pessoaForm"
    (ngSubmit)="salvar()"
    *ngIf="!carregando && !erro"
  >
    <!-- Campos de Pessoa -->
    <div class="form-group">
      <label for="nome">Nome</label>
      <input type="text" id="nome" formControlName="nome" class="form-control" [ngClass]="{ 'is-invalid': exibirErro('nome') }" />
      <div *ngIf="exibirErro('nome')" class="error-message">Nome é obrigatório.</div>
    </div>

    <div class="form-group">
      <label for="matricula">Matrícula</label>
      <input type="text" id="matricula" formControlName="matricula" class="form-control" [ngClass]="{ 'is-invalid': exibirErro('matricula') }" />
      <div *ngIf="exibirErro('matricula')" class="error-message">Matrícula é obrigatória.</div>
    </div>

    <div class="form-group">
      <label for="endereco">Endereço</label>
      <input type="text" id="endereco" formControlName="endereco" class="form-control" [ngClass]="{ 'is-invalid': exibirErro('endereco') }" />
      <div *ngIf="exibirErro('endereco')" class="error-message">Endereço é obrigatório.</div>
    </div>

    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="cep">CEP</label>
        <input type="text" id="cep" formControlName="cep" class="form-control" [ngClass]="{ 'is-invalid': exibirErro('cep') }" />
        <button type="button" (click)="buscarEndereco()" class="bg-blue-500 text-white px-4 rounded-r">Buscar</button>
        <div *ngIf="exibirErro('cep')" class="error-message">CEP inválido.</div>
      </div>

      <div class="form-group col-md-6">
        <label for="cidade">Cidade</label>
        <input type="text" id="cidade" formControlName="cidade" class="form-control" [ngClass]="{ 'is-invalid': exibirErro('cidade') }" />
        <div *ngIf="exibirErro('cidade')" class="error-message">Cidade é obrigatória.</div>
      </div>

      <div class="form-group col-md-6">
        <label for="uf">UF</label>
        <input type="text" id="uf" formControlName="uf" class="form-control" [ngClass]="{ 'is-invalid': exibirErro('uf') }" />
        <div *ngIf="exibirErro('uf')" class="error-message">UF deve ter 2 caracteres.</div>
      </div>
    </div>

    <div class="form-group checkbox">
      <input type="checkbox" id="ativo" formControlName="ativo" />
      <label for="ativo">Ativo</label>
    </div>

    <!-- Botões de ação -->
    <div class="form-actions">
      <button type="submit" class="btn btn-success" [disabled]="salvando">
        {{ salvando ? "Salvando..." : "Salvar" }}
      </button>
      
      <button type="button" class="btn btn-primary" routerLink="/">Voltar</button>

    </div>
  </form>
</div>
