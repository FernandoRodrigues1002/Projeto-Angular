
<div class="container">
  <h2 class="title">Editar Pessoa</h2>
  <form
    [formGroup]="pessoaForm"
    (ngSubmit)="salvar()"
    *ngIf="!carregando && !erro"
  >
    <!-- Agrupamento dos campos -->
    <div class="form-group">
      <div class="form-field">
        <label for="nome">Nome *</label>
        <input type="text" id="nome" formControlName="nome" class="input-field" [ngClass]="{ 'is-invalid': exibirErro('nome') }" />
        <div *ngIf="exibirErro('nome')" class="error-message">Nome é obrigatório.</div>
      </div>

      <div class="form-field">
        <label for="matricula">Matrícula *</label>
        <input type="text" id="matricula" formControlName="matricula" class="input-field" [ngClass]="{ 'is-invalid': exibirErro('matricula') }" />
        <div *ngIf="exibirErro('matricula')" class="error-message">Matrícula é obrigatória.</div>
      </div>
    </div>

    <div class="form-field">
      <label for="endereco">Endereço *</label>
      <input type="text" id="endereco" formControlName="endereco" class="input-field" [ngClass]="{ 'is-invalid': exibirErro('endereco') }" />
      <div *ngIf="exibirErro('endereco')" class="error-message">Endereço é obrigatório.</div>
    </div>

    <div class="form-group">
      <div class="form-field">
        <label for="cep">CEP *</label>
        <div class="cep-container">
          <input type="text" id="cep" formControlName="cep" class="input-field" placeholder="Digite o CEP" maxlength="9" />
          <button type="button" (click)="buscarEndereco()" class="btn btn-blue">Buscar</button>
        </div>
        <div *ngIf="exibirErro('cep')" class="error-message">CEP inválido.</div>
      </div>

      <div class="form-field">
        <label for="cidade">Cidade *</label>
        <input type="text" id="cidade" formControlName="cidade" class="input-field" />
        <div *ngIf="exibirErro('cidade')" class="error-message">Cidade é obrigatória.</div>
      </div>

      <div class="form-field">
        <label for="uf">UF *</label>
        <input type="text" id="uf" formControlName="uf" class="input-field" maxlength="2" />
        <div *ngIf="exibirErro('uf')" class="error-message">UF deve ter 2 caracteres.</div>
      </div>
    </div>

    <!-- Botões de ação -->
    <div class="form-actions">
      <button type="submit" class="btn btn-green" [disabled]="salvando">
        {{ salvando ? "Salvando..." : "Salvar" }}
      </button>
      
      <button type="button" class="btn btn-gray" routerLink="/">Voltar</button>
    </div>
  </form>
</div>
